var Mynix_Custom_UI=(function(e,c,h,d){var f=function(j){j="undefined"==typeof j?"":j;e(".card-badge").each(function(){var k=e(this);if(j.length){e.each(k.attr("class").split(/\s+/),function(l,m){m=m.replace("-badge","");switch(m){case"amex":case"visa":case"mastercard":case"discover":case"dinersclub":case"jcb":case"maestro":case"paypal":return j!=m&&k.addClass("disabled")||k.removeClass("disabled")}})}else{k.removeClass("disabled")}})};var a=function(){var j=e("#"+c+"-card-number").val(),k=e("#"+c+"-card-expiry").val(),n=e("#"+c+"-card-cvc");j=j.replace(/\s/g,"");k=k.replace(/\s/g,"");n=n.length?n.val():false;var m=j.length<12||j.length>19;var l=k.length!==5&&k.length!==7;var o=false!==n&&(n.length<3||n.length>4);if(m){e("#"+c+"-card-number").effect("shake",{direction:"right",distance:10})}if(l){e("#"+c+"-card-expiry").effect("shake",{distance:10})}if(o){e("#"+c+"-card-cvc").effect("shake",{direction:"right",distance:10})}return !(m||l||o)};var i=function(n){var j=e("#"+c+"-card-number").val(),m=e("#"+c+"-card-cvc"),k=e("#"+c+"-card-expiry").val();j=j.replace(/\s/g,"");k=k.replace(/\s/g,"");m=m.length?m.val():false;var l={number:j,expirationDate:k};if(false!==m){l.cvv=m}h.client.tokenizeCard(l,n)};var g=function(j){h.init(j);i(h.getSubmitFunction(j.token))};function b(){if(e("#payment_method_"+c).is(":checked")){var j=e("form.checkout, form#order_review");if(h.paypal_button||a()){if(!e("input[name=payment_method_nonce]").val()){h.mynixClientGetToken(g);return false}else{e("."+c+"-card-field").val("");h.unblock_modal();return true}}else{return false}}return true}e(function(){var j=function(){return b()};e("form.checkout").on("checkout_place_order_"+c,j);e("form#order_review").on("submit",j);e("form.checkout, form#order_review").on("change","#"+c+"-cc-form :input",function(){e("input[name=payment_method_nonce]").val("")});e("form.checkout, form#order_review").on("keyup","#"+c+"-card-number",function(){var k="";if(e(this).hasClass("identified")){e.each(e(this).attr("class").split(/\s+/),function(m,n){switch(n){case"amex":case"visa":case"mastercard":case"discover":case"dinersclub":case"jcb":case"maestro":case"paypal":return k=n}})}else{if("undefined"!=typeof Mynix_CC_Validator){var l=Mynix_CC_Validator;l.init(e("#"+c+"-card-number").val().replace(" ",""));switch(l.is_valid_issuer(true)){case l.AMEX:k="amex";break;case l.VISA:k="visa";break;case l.MASTER:k="mastercard";break;case l.DISCOVER:k="discover";break;case l.DINERS:k="dinersclub";break;case l.JCB:k="jcb";break;case l.MAESTRO:k="maestro";break;case l.PAYPAL:k="paypal";break}}}f(k)});e("form.checkout, form#order_review").on("input propertychange","#"+c+"-card-expiry",function(){if(2==e(this).val().length){e(this).val(e(this).val()+"/")}})});return{mynixCheckCard:a,tokenize_card:i,mynixServerTokenReceived:g,toggle_card:f}})(jQuery,"woo-mynix-braintree-gateway",Mynix_Gateway,"undefined"!=typeof Mynix_Console_Debug?Mynix_Console_Debug:false);