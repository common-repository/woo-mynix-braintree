"use strict";var Mynix_Gateway=(function(i,b,c){var m=0;var f=null;var g=false;var e=function(){("undefined"!=typeof Mynix_3DS)&&Mynix_3DS.unblock_modal()};var j=function(){return"undefined"!=typeof wc_mynix_params.integration_type?wc_mynix_params.integration_type:"custom"};var l=function(n){if(Object.prototype.toString.call(n)==="[object Array]"){n=n.join("<br>")}else{if(Object.prototype.toString.call(n)==="[object Object]"){n=n.message}else{if(!n.toString().length){n="Unknown error."}}}n='<div class="woocommerce-error woocommerce_error">'+n.toString()+"</div>";i(".woocommerce-error, .woocommerce-message, .woocommerce_error").remove();i("form.checkout, form#order_review").prepend(n);i("form.checkout, form#order_review").removeClass("processing").unblock();i("form.checkout, form#order_review").find(".input-text, select").blur();i("html, body").animate({scrollTop:(i("form.checkout").offset().top-100)},1000);i(document.body).trigger("checkout_error");i("form.checkout, form#order_review").unblock();e();return false};var k=function(n){i.ajax({url:wc_mynix_params.ajaxurl,type:"POST",dataType:"json",data:{action:"send_client_token",mynix_nonce:wc_mynix_params.mynix_nonce},error:function(o,q,p){l([q,p])},success:n})};function d(o,p){p="undefined"==typeof p?j():p;var n=i("form.checkout, form#order_review");if(o.hasOwnProperty("error")){return l(o.error)}if(n.length&&!n[0].id.length){n[0].id=b+"-checkout";o.id=n[0].id}i("#payment").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var q="undefined"!=typeof o.onReady?o.onReady:false;o.onReady=function(r){q&&q(r);i("#payment").unblock()};o.onError=function(r){l(r)};braintree.setup(o.token,"hosted"==p?"custom":p,o);Mynix_Gateway.client=new braintree.api.Client({clientToken:o.token})}var h=function(p,n){if(Object.prototype.toString.call(n)==="[object Object]"){n=n.nonce}if(i("input[name=payment_method_nonce]").length>1){i("input[name=payment_method_nonce]").val(n)}var o=i("form.checkout, form#order_review");if(null!==p){l(p)}else{i("<input>").attr({type:"hidden",id:"woocommerce_checkout_place_order",name:"woocommerce_checkout_place_order",value:true}).appendTo(o);i("<input>").attr({type:"hidden",id:"payment_method_nonce",name:"payment_method_nonce",value:n}).appendTo(o);if("undefined"!==typeof wc_mynix_params.submit_order&&wc_mynix_params.submit_order.trim().length){i("form.checkout, form#order_review").block({message:wc_mynix_params.submit_order,blockMsgClass:"mynix-blockUI",overlayCSS:{background:"#fff",opacity:0.6}})}o.submit()}};var a=function(o,r){r="undefined"==typeof r?true:r;var n="undefined"!=typeof wc_mynix_params.braintree_3ds&&"true"==wc_mynix_params.braintree_3ds;if(r&&n){try{var q=JSON.parse(atob(o));wc_mynix_params.avs="undefined"!=typeof q.challenges.postal_code||"undefined"!=typeof q.challenges.street_address}catch(p){}}if(r&&n&&("undefined"!=typeof Mynix_3DS)){return Mynix_3DS.mynix3DSFilter}return h};i(function(){i("body").on("checkout_error",function(){e()});i(window).load(function(){"undefined"!=typeof i(".help_tip").data("events")||setTimeout(function(){i(".help_tip").tipTip()},2000)})});return{client:f,mynixClientGetToken:k,mynixShowError:l,mynixSubmitOrder:h,init:d,getSubmitFunction:a,unblock_modal:e,paypal_button:g,threads:m,get_integration_type:j}}(jQuery,"woo-mynix-braintree-gateway","undefined"!=typeof Mynix_Console_Debug?Mynix_Console_Debug:false));